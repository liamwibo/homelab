- trigger:
    - platform: time_pattern
      hours: /1
    - platform: homeassistant
      event: start
  action:
    - service: weather.get_forecasts
      target:
        entity_id: weather.home
      data:
        type: daily
      response_variable: daily
  sensor:
    - name: weather summary
      unique_id: weather_summary
      state: days
      attributes:
        datetime0: "{{ daily['weather.home'].forecast[0].datetime }}"
        condition0: "{{ daily['weather.home'].forecast[0].condition }}"
        summary0: "{{ daily['weather.home'].forecast[0].text }}"
        cond_icon0: >
          {% set weather = daily['weather.home'].forecast[0].condition %}
          {% if is_state('sun.sun', 'above_horizon') %}
          {{ '/local/icon/weather/animated/' + weather + '.svg' }}
          {% else %}
          {{ '/local/icon/weather/animated/' + weather + '_night.svg' }}
          {% endif %}
        temperature0: "{{ daily['weather.home'].forecast[0].temperature }}"
        precipitation0: "{{ daily['weather.home'].forecast[0].precipitation }}"
        datetime1: "{{ daily['weather.home'].forecast[1].datetime }}"
        condition1: "{{ daily['weather.home'].forecast[1].condition }}"
        cond_icon1: >
          {% set weather = daily['weather.home'].forecast[1].condition %}
          {% if is_state('sun.sun', 'above_horizon') %}
          {{ '/local/icon/weather/animated/' + weather + '.svg' }}
          {% else %}
          {{ '/local/icon/weather/animated/' + weather + '_night.svg' }}
          {% endif %}
        temperature1: "{{ daily['weather.home'].forecast[1].temperature }}"
        precipitation1: "{{ daily['weather.home'].forecast[1].precipitation }}"
        datetime2: "{{ daily['weather.home'].forecast[2].datetime }}"
        condition2: "{{ daily['weather.home'].forecast[2].condition }}"
        cond_icon2: >
          {% set weather = daily['weather.home'].forecast[2].condition %}
          {% if is_state('sun.sun', 'above_horizon') %}
          {{ '/local/icon/weather/animated/' + weather + '.svg' }}
          {% else %}
          {{ '/local/icon/weather/animated/' + weather + '_night.svg' }}
          {% endif %}
        temperature2: "{{ daily['weather.home'].forecast[2].temperature }}"
        precipitation2: "{{ daily['weather.home'].forecast[2].precipitation }}"
        datetime3: "{{ daily['weather.home'].forecast[3].datetime }}"
        condition3: "{{ daily['weather.home'].forecast[3].condition }}"
        cond_icon3: >
          {% set weather = daily['weather.home'].forecast[3].condition %}
          {% if is_state('sun.sun', 'above_horizon') %}
          {{ '/local/icon/weather/animated/' + weather + '.svg' }}
          {% else %}
          {{ '/local/icon/weather/animated/' + weather + '_night.svg' }}
          {% endif %}
        temperature3: "{{ daily['weather.home'].forecast[3].temperature }}"
        precipitation3: "{{ daily['weather.home'].forecast[3].precipitation }}"
        datetime4: "{{ daily['weather.home'].forecast[4].datetime }}"
        condition4: "{{ daily['weather.home'].forecast[4].condition }}"
        cond_icon4: >
          {% set weather = daily['weather.home'].forecast[4].condition %}
          {% if is_state('sun.sun', 'above_horizon') %}
          {{ '/local/icon/weather/animated/' + weather + '.svg' }}
          {% else %}
          {{ '/local/icon/weather/animated/' + weather + '_night.svg' }}
          {% endif %}
        temperature4: "{{ daily['weather.home'].forecast[4].temperature }}"
        precipitation4: "{{ daily['weather.home'].forecast[4].precipitation }}"
        datetime5: "{{ daily['weather.home'].forecast[5].datetime }}"
        condition5: "{{ daily['weather.home'].forecast[5].condition }}"
        cond_icon5: >
          {% set weather = daily['weather.home'].forecast[5].condition %}
          {% if is_state('sun.sun', 'above_horizon') %}
          {{ '/local/icon/weather/animated/' + weather + '.svg' }}
          {% else %}
          {{ '/local/icon/weather/animated/' + weather + '_night.svg' }}
          {% endif %}
        temperature5: "{{ daily['weather.home'].forecast[5].temperature }}"
        precipitation5: "{{ daily['weather.home'].forecast[5].precipitation }}"

- trigger:
    - platform: time_pattern
      minutes: 5
    - platform: homeassistant
      event: start
  action:
    - service: weather.get_forecasts
      target:
        entity_id: weather.home
      data:
        type: hourly
      response_variable: hourly
  sensor:
    - name: weather summary hourly
      unique_id: weather_summary_hourly
      state: hours
      attributes:
        datetime_houre0: "{{ hourly['weather.home'].forecast[0].datetime }}"
        condition_houre0: "{{ hourly['weather.home'].forecast[0].condition }}"
        cond_icon_houre0: >
          {% set weather = hourly['weather.home'].forecast[0].condition %}
          {% if is_state('sun.sun', 'above_horizon') %}
          {{ '/local/icon/weather/animated/' + weather + '.svg' }}
          {% else %}
          {{ '/local/icon/weather/animated/' + weather + '_night.svg' }}
          {% endif %}
        temperature_houre0: "{{ hourly['weather.home'].forecast[0].temperature }}"
        precipitation_houre0: "{{ hourly['weather.home'].forecast[0].precipitation }}"
        precipitation_probability_houre0: "{{ hourly['weather.home'].forecast[0].precipitation_probability }}"
        datetime_houre1: "{{ hourly['weather.home'].forecast[1].datetime }}"
        condition_houre1: "{{ hourly['weather.home'].forecast[1].condition }}"
        cond_icon_houre1: >
          {% set weather = hourly['weather.home'].forecast[1].condition %}
          {% if is_state('sun.sun', 'above_horizon') %}
          {{ '/local/icon/weather/animated/' + weather + '.svg' }}
          {% else %}
          {{ '/local/icon/weather/animated/' + weather + '_night.svg' }}
          {% endif %}
        temperature_houre1: "{{ hourly['weather.home'].forecast[1].temperature }}"
        precipitation_houre1: "{{ hourly['weather.home'].forecast[1].precipitation }}"
        precipitation_probability_houre1: "{{ hourly['weather.home'].forecast[1].precipitation_probability }}"
        datetime_houre2: "{{ hourly['weather.home'].forecast[2].datetime }}"
        condition_houre2: "{{ hourly['weather.home'].forecast[2].condition }}"
        cond_icon_houre2: >
          {% set weather = hourly['weather.home'].forecast[2].condition %}
          {% if is_state('sun.sun', 'above_horizon') %}
          {{ '/local/icon/weather/animated/' + weather + '.svg' }}
          {% else %}
          {{ '/local/icon/weather/animated/' + weather + '_night.svg' }}
          {% endif %}
        temperature_houre2: "{{ hourly['weather.home'].forecast[2].temperature }}"
        precipitation_houre2: "{{ hourly['weather.home'].forecast[2].precipitation }}"
        precipitation_probability_houre2: "{{ hourly['weather.home'].forecast[2].precipitation_probability }}"
        datetime_houre3: "{{ hourly['weather.home'].forecast[3].datetime }}"
        condition_houre3: "{{ hourly['weather.home'].forecast[3].condition }}"
        cond_icon_houre3: >
          {% set weather = hourly['weather.home'].forecast[3].condition %}
          {% if is_state('sun.sun', 'above_horizon') %}
          {{ '/local/icon/weather/animated/' + weather + '.svg' }}
          {% else %}
          {{ '/local/icon/weather/animated/' + weather + '_night.svg' }}
          {% endif %}
        temperature_houre3: "{{ hourly['weather.home'].forecast[3].temperature }}"
        precipitation_houre3: "{{ hourly['weather.home'].forecast[3].precipitation }}"
        precipitation_probability_houre3: "{{ hourly['weather.home'].forecast[3].precipitation_probability }}"
        datetime_houre4: "{{ hourly['weather.home'].forecast[4].datetime }}"
        condition_houre4: "{{ hourly['weather.home'].forecast[4].condition }}"
        cond_icon_houre4: >
          {% set weather = hourly['weather.home'].forecast[4].condition %}
          {% if is_state('sun.sun', 'above_horizon') %}
          {{ '/local/icon/weather/animated/' + weather + '.svg' }}
          {% else %}
          {{ '/local/icon/weather/animated/' + weather + '_night.svg' }}
          {% endif %}
        temperature_houre4: "{{ hourly['weather.home'].forecast[4].temperature }}"
        precipitation_houre4: "{{ hourly['weather.home'].forecast[4].precipitation }}"
        precipitation_probability_houre4: "{{ hourly['weather.home'].forecast[4].precipitation_probability }}"
        datetime_houre5: "{{ hourly['weather.home'].forecast[5].datetime }}"
        condition_houre5: "{{ hourly['weather.home'].forecast[5].condition }}"
        cond_icon_houre5: >
          {% set weather = hourly['weather.home'].forecast[5].condition %}
          {% if is_state('sun.sun', 'above_horizon') %}
          {{ '/local/icon/weather/animated/' + weather + '.svg' }}
          {% else %}
          {{ '/local/icon/weather/animated/' + weather + '_night.svg' }}
          {% endif %}
        temperature_houre5: "{{ hourly['weather.home'].forecast[5].temperature }}"
        precipitation_houre5: "{{ hourly['weather.home'].forecast[5].precipitation }}"
        precipitation_probability_houre5: "{{ hourly['weather.home'].forecast[5].precipitation_probability }}"

- sensor:
    - name: "Weericoon Pad"
      state: >
        {% set toestand = states('weather.home') %}
        /local/icon/weather/animated/{{ toestand | lower }}.svg
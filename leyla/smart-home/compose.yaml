services:

  homeassistant:
    image: linuxserver/homeassistant:latest
    container_name: homeassistant
    restart: unless-stopped
    ports:
      - 8123:8123
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/Brussels
    volumes:
      - ./data:/config
      - ./config/configuration.yaml:/config/configuration.yaml
    networks:
      - frontend
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.homeassistant.rule=Host(`hoass.02082004.xyz`)"
      - "traefik.http.routers.homeassistant.entrypoints=websecure"
      - "traefik.http.routers.homeassistant.tls=true"
      - "traefik.http.routers.homeassistant.tls.certresolver=letencrypt"
      - "traefik.http.services.homeassistant.loadbalancer.server.port=8123"
    deploy:
      resources:
        limits:
          cpus: '0.5'
          memory: 500M

networks:
  frontend:
    external: true